use newsletter::startup;
use std::net::TcpListener;

#[tokio::main]
async fn main() -> std::io::Result<()> {
    // Tip: install `cargo expand` to inspect the boilerplate code generated by the `tokio::main`
    // procedural macro:
    // 1. `rustup toolchain install nightly --allow-downgrade` (if not yet installed)
    // 2. `cargo +nightly expand --bin newsletter`
    let listener = TcpListener::bind("127.0.0.1:8000").expect("Failed to bind port 8000");

    startup::run_server(listener)?.await
}
